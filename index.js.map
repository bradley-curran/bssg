{
  "version": 3,
  "sources": ["src/index.ts", "src/step/cp.ts", "src/step/mkdir.ts", "src/step/rm.ts", "src/step/transformless.ts", "src/step/transformmarkdown.ts", "src/step/transformpug.ts"],
  "sourcesContent": ["#!/usr/bin/env node\nimport { readFile } from \"fs/promises\";\n\nimport cp from \"./step/cp\";\nimport mkdir from \"./step/mkdir\";\nimport rm from \"./step/rm\";\nimport transformless from \"./step/transformless\";\nimport transformmarkdown from \"./step/transformmarkdown\";\nimport transformpug from \"./step/transformpug\";\n\nconst steps: any = {\n  cp,\n  mkdir,\n  rm,\n  transformless,\n  transformmarkdown,\n  transformpug,\n};\n\nconst getBuildConfig = async () => {\n  const buffer = await readFile(\"bssg.json\");\n  return JSON.parse(buffer.toString());\n};\n\nconst processBuildConfig = async (buildConfig: any) => {\n  for (const buildStep of buildConfig.buildSteps) {\n    const step = steps[buildStep.step];\n    console.log(`start: ${step.description(buildStep)}`);\n    await step.step(buildStep);\n    console.log(`done:  ${step.description(buildStep)}`);\n  }\n\n  console.log(\"bssg build complete\");\n};\n\ngetBuildConfig()\n  .then(processBuildConfig)\n  .catch((e) => console.log(e));\n", "import { cp } from \"fs/promises\";\n\ntype CpProps = {\n  inputFile: string;\n  outputFile: string;\n};\n\nconst description = (props: CpProps) => {\n  return `cp (${props.inputFile} -> ${props.outputFile})`;\n};\n\nconst step = async (props: CpProps) => {\n  return cp(props.inputFile, props.outputFile);\n};\n\nexport default { description, step };\n", "import { mkdir } from \"fs/promises\";\n\ntype MkdirProps = {\n  path: string;\n};\n\nconst description = (props: MkdirProps) => {\n  return `mkdir (${props.path})`;\n};\n\nconst step = async (props: MkdirProps) => {\n  return mkdir(props.path);\n};\n\nexport default { description, step };\n", "import { rm } from \"fs/promises\";\n\ntype RmProps = {\n  path: string;\n};\n\nconst description = (props: RmProps) => {\n  return `rm (${props.path})`;\n};\n\nconst step = async (props: RmProps) => {\n  return rm(props.path, { recursive: true, force: true });\n};\n\nexport default { description, step };\n", "import { readFile, writeFile } from \"fs/promises\";\nimport { render } from \"less\";\n\ntype TransformLessProps = {\n  inputFile: string;\n  outputFile: string;\n};\n\nconst description = (props: TransformLessProps) => {\n  return `transformless (${props.inputFile} -> ${props.outputFile})`;\n};\n\nconst step = async (props: TransformLessProps) => {\n  const input = await readFile(props.inputFile);\n  const output = await render(input.toString());\n  return writeFile(props.outputFile, output.css);\n};\n\nexport default { description, step };\n", "import { readFile, writeFile } from \"fs/promises\";\nimport unified = require(\"unified\");\nimport remarkParse = require(\"remark-parse\");\nimport remarkRehype = require(\"remark-rehype\");\nimport rehypeStringify = require(\"rehype-stringify\");\nimport { compileFile } from \"pug\";\nimport pretty = require(\"pretty\");\n\ntype TransformMarkdownProps = {\n  inputFile: string;\n  outputFile: string;\n  extends: string;\n};\n\nconst description = (props: TransformMarkdownProps) => {\n  return `transformmarkdown (extends: ${props.extends}, ${props.inputFile} -> ${props.outputFile})`;\n};\n\nconst step = async (props: TransformMarkdownProps) => {\n  const processor = unified()\n    .use(remarkParse)\n    .use(remarkRehype)\n    .use(rehypeStringify);\n\n  const input = await readFile(props.inputFile);\n  const converted = await processor.process(input.toString());\n  const htmlOutput = converted.contents as string;\n  const pugOutput = compileFile(props.extends)();\n  const combinedOutput = pugOutput.replace(\"BLOCK_CONTENT\", htmlOutput);\n  const output = pretty(combinedOutput);\n  return writeFile(props.outputFile, output);\n};\n\nexport default { description, step };\n", "import { compileFile } from \"pug\";\nimport { readFile, writeFile } from \"fs/promises\";\nimport pretty = require(\"pretty\");\n\ntype TransformPugProps = {\n  inputFile: string;\n  outputFile: string;\n  localsFile?: string;\n};\n\nconst getLocals = async (localsFile?: string) => {\n  if (localsFile) {\n    const buffer = await readFile(localsFile);\n    return JSON.parse(buffer.toString());\n  }\n\n  return {};\n};\n\nconst description = (props: TransformPugProps) => {\n  return `transformpug (locals: ${props.localsFile}, ${props.inputFile} -> ${props.outputFile})`;\n};\n\nconst step = async (props: TransformPugProps) => {\n  const locals = getLocals(props.localsFile);\n  const pugOutput = compileFile(props.inputFile)(locals);\n  const output = pretty(pugOutput);\n  return writeFile(props.outputFile, output);\n};\n\nexport default { description, step };\n"],
  "mappings": ";aACA,MAAyB,uBCDzB,MAAmB,uBAOb,EAAc,AAAC,GACZ,OAAO,EAAM,gBAAgB,EAAM,cAGtC,EAAO,KAAO,IACX,SAAG,EAAM,UAAW,EAAM,UAAU,EAGtC,EAAQ,CAAE,cAAa,MAAK,ECfnC,MAAsB,uBAMhB,EAAc,AAAC,GACZ,UAAU,EAAM,QAGnB,EAAO,KAAO,IACX,YAAM,EAAM,IAAI,EAGlB,EAAQ,CAAE,cAAa,MAAK,ECdnC,MAAmB,uBAMb,EAAc,AAAC,GACZ,OAAO,EAAM,QAGhB,EAAO,KAAO,IACX,SAAG,EAAM,KAAM,CAAE,UAAW,GAAM,MAAO,EAAK,CAAC,EAGjD,EAAQ,CAAE,cAAa,MAAK,ECdnC,MAAoC,uBACpC,EAAuB,wCAOjB,EAAc,AAAC,GACZ,kBAAkB,EAAM,gBAAgB,EAAM,cAGjD,EAAO,KAAO,IAA8B,CAChD,GAAM,GAAQ,KAAM,eAAS,EAAM,SAAS,EACtC,EAAS,KAAM,aAAO,EAAM,SAAS,CAAC,EAC5C,MAAO,gBAAU,EAAM,WAAY,EAAO,GAAG,CAC/C,EAEO,EAAQ,CAAE,cAAa,MAAK,EClBnC,MAAoC,uBAKpC,EAA4B,2CAJrB,EAAU,QAAQ,mCAClB,EAAc,QAAQ,wCACtB,EAAe,QAAQ,yCACvB,EAAkB,QAAQ,4CAE1B,EAAS,QAAQ,kCAQlB,EAAc,AAAC,GACZ,+BAA+B,EAAM,YAAY,EAAM,gBAAgB,EAAM,cAGhF,EAAO,KAAO,IAAkC,CACpD,GAAM,GAAY,EAAQ,EACvB,IAAI,CAAW,EACf,IAAI,CAAY,EAChB,IAAI,CAAe,EAEhB,EAAQ,KAAM,eAAS,EAAM,SAAS,EAEtC,EAAa,AADD,MAAM,GAAU,QAAQ,EAAM,SAAS,CAAC,GAC7B,SAEvB,EAAiB,AADL,kBAAY,EAAM,OAAO,EAAE,EACZ,QAAQ,gBAAiB,CAAU,EAC9D,EAAS,EAAO,CAAc,EACpC,MAAO,gBAAU,EAAM,WAAY,CAAM,CAC3C,EAEO,EAAQ,CAAE,cAAa,MAAK,ECjCnC,MAA4B,2CAC5B,EAAoC,uBAC7B,EAAS,QAAQ,kCAQlB,EAAY,KAAO,IAAwB,CAC/C,GAAI,EAAY,CACd,GAAM,GAAS,KAAM,eAAS,CAAU,EACxC,MAAO,MAAK,MAAM,EAAO,SAAS,CAAC,CACrC,CAEA,MAAO,CAAC,CACV,EAEM,EAAc,AAAC,GACZ,yBAAyB,EAAM,eAAe,EAAM,gBAAgB,EAAM,cAG7E,EAAO,KAAO,IAA6B,CAC/C,GAAM,GAAS,EAAU,EAAM,UAAU,EACnC,EAAY,kBAAY,EAAM,SAAS,EAAE,CAAM,EAC/C,EAAS,EAAO,CAAS,EAC/B,MAAO,gBAAU,EAAM,WAAY,CAAM,CAC3C,EAEO,EAAQ,CAAE,cAAa,MAAK,ENpBnC,GAAM,GAAa,CACjB,KACA,QACA,KACA,gBACA,oBACA,cACF,EAEM,EAAiB,SAAY,CACjC,GAAM,GAAS,KAAM,eAAS,WAAW,EACzC,MAAO,MAAK,MAAM,EAAO,SAAS,CAAC,CACrC,EAEM,EAAqB,KAAO,IAAqB,CACrD,OAAW,KAAa,GAAY,WAAY,CAC9C,GAAM,GAAO,EAAM,EAAU,MAC7B,QAAQ,IAAI,UAAU,EAAK,YAAY,CAAS,GAAG,EACnD,KAAM,GAAK,KAAK,CAAS,EACzB,QAAQ,IAAI,UAAU,EAAK,YAAY,CAAS,GAAG,CACrD,CAEA,QAAQ,IAAI,qBAAqB,CACnC,EAEA,EAAe,EACZ,KAAK,CAAkB,EACvB,MAAM,AAAC,GAAM,QAAQ,IAAI,CAAC,CAAC",
  "names": []
}
